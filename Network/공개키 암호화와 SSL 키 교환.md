## 공개키 암호화와 SSL 키 교환
### 공개키 암호 방식

> 대칭키는 암, 복호화를 하나의 키로 진행하다보니 배송 중 키가 탈취되는 순간(서로의 키를 교환해야 복호화가 가능함) 해커도 정보를 볼 수 있다. 
> 
> 이를 해결하기 위해 나온 방식이 공개키 또는 비대칭키 방식이다.

**전송예시**
>데이터를 안전하게 전송하고 싶어하는 `A` 와 `B` 가 있다.
1. `A`와 `B`는 각각 하나의 개인키와 공개키를 가지고있다.
2. 개인 키는 아무에게도 공개하지않고 오직 자신만 가지고있다.
3. `A`는 `B`의 공개키를 통해 자신의 정보(`M`)를 암호화한다.
4. `M`은 `B`의 개인키로만 복호화가 가능하다.

만약 해커(`H`)가 `B`의 공개키와 `M`을 획득해도 이 정보를 볼 수 있는방법은 `B`만 가지고있는 
개인키로 복호화하는 방법밖에없다.

개인키가 노출되지 않는다는 가정하에 안전한 방법이지만 대칭키 방식에 비해 
속도가 느리기 때문에 모든 통신을 공개키 방식으로 하는 것은 부담스럽다.

우리가 일반적으로 많이 사용하는 HTTPS 프로토콜은 클라이언트와 서버간 효율적인 데이터 전송을 위해 
위 방식을 결합한 형태(단, RSA 로 암호화된 SSL 인증서에만 해당)로 설계되었다.

### HTTPS 에서는...

**데이터 전송 전 키 교환 방식 [그림 1-1 참고]**
1. 먼저 CA에서 발급해준 SSL 인증서에 포함되어있는 서버측의 공개키(`B`\`)를 획득한다.
2. 클라이언트에서 임의의 대칭키(`A`)를 생성
3. 클라이언트 대칭키(`A`)를 서버 공개키(`B`\`)로 암호화하고 암호화된 대칭키(`C`)를 서버로 전달
4. 서버는 암호화된 대칭키(`C`) 를 자신의 개인키(`B`) 로 복호화
5. 이제 클라이언트와 서버는 동일한 대칭키로 통신(세션 수립)

  

**그림 1. HTTPS 통신 시 오고가는 패킷**

  

  

**그림 1-1. TLS_RSA 키 교환 방법**

  

  

### 참고
- https://aws-hyoh.tistory.com/47 (공개키 암호화)
- https://medium.com/@wynn1275/https%EC%9D%98-cipher-suite-%EB%B0%8F-rsa-dhe-%ED%82%A4-%EA%B5%90%ED%99%98-%EB%B0%A9%EB%B2%95-75eb36b101c8 (RSA, DHE 키 교환방법)