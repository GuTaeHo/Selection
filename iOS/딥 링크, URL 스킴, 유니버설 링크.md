# 딥 링크, URL 스킴, 유니버설 링크

URL 링크를 통해 앱을 실행하거나, 미 설치된 경우 스토어로 보내는 기능이 필요한 경우가 있다.

이러한 기능을 `Deep Link` 라고 부르며, `Deep Link` 의 구현 방식은 크게 2가지가 있다.

구현이 가장 간단한 `URL Scheme` (Custom Scheme) 방식 부터 알아보자.

</br>

### URL 스킴 방식

```
URL 스킴이 앱에 등록되어있다는 가정하에 진행

실 제품의 URL 스킴 대신 임의로 작성
```

</br>

**동작방식**

1. 사용자가 링크를 누르거나 검색
2. 웹 브라우저가 수신된 html, javascript 실행
3. 설치 유무 검사 및 앱 오픈 or 앱 스토어 링크로 리다이렉트

</br>

서버에 업로드 된 웹 사이트의 javascript 코드 동작 방식은 아래와 같다  


1. href 명령을 통해 앱의 URL 스킴(ex: "myapp://myapp")을 직접 호출

    ```js
    document.href = "myapp://myapp"
    ```

2. 브라우저는 할당된 URL 스킴과 일치하는 앱이 설치되어있다면 **실행한다**  
없다면 (브라우저마다 다르지만) 얼럿을 표시하거나 아무런 동작을 하지 않는다

    ```
    앱 설치 유무를 제공하는 API 가 없기 떄문에 앱이 열리지 않았을 경우 스토어 링크를 연다
    ```

3. 1초 뒤, 스토어 링크를 연다
    ```js
    setTimeout(() => {
        openStore()
    }, "1000");
    ```

</br>

스킴 방식은 구현이 간단하지만, 앱이 설치되어있지 않았을 경우,  
스토어로 보내지않고 **"잘못된 URL"** 이라는 얼럿만 띄우고 **동작하지 않는 경우**가 발생할 수 있다는 치명적인 단점이 있다.

</br>
</br>

## 유니버설 링크

Apple 에서 출시한 `iOS 전용 딥링크`이며 `macOS`, `watchOS`에서도 사용함

iOS 9 이상 부터 지원하기 시작했고, 기존 `URL Scheme` 방식의 단점을 보완한 방식

</br>

**동작방식**

1. 사용자가 링크를 누르거나 검색
2. `iOS` 가 해당 URL 과 연결된 앱이 설치되었는지 확인
3. 설치되어있다면 앱 실행, 없다면 해당 링크의 웹 사이트 오픈


</br>



### 구축방법

```
신뢰할 수 있는 루트 인증기관(`CA`)에서 발급한 인증서가 설치된  
`https` 프로토콜로 접근 가능한 웹 서버가 있다는 가정하에 진행
```
