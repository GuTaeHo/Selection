# 동기와 비동기

동기는 **"동시에 일어난다"** 라는 뜻을 가지고 있으며,   
명령의 실행과 결과가 한자리에서 동시에 일어난다.

비동기는 **"동시에 일어나지 않는다"** 라는 뜻을 가지고 있으며,  
명령의 실행과 결과가 동시에 일어나지 않음을 의미한다.

<br>

라면을 끓일 때 예시로 들면
1. 냄비에 물을 받는다.
2. 가스 불을 켠다.
3. 냄비를 올린다.
4. 물이 끓을 때 까지 기다린다.
5. 라면과 스프를 넣고 3분을 기다린다.
6. 맛있게 먹는다.

<br>

위 형태를 `동기적으로 실행` 된다고 부른다.

<br>

또 다른 예시를 보자.

<br>

형(A)이 거실, 안방 동생(B)이 주방, 화장실을 청소한다고 가정하자, 동기라면 아래와 같이 움직일 것이다.

1. A > 거실 청소 (20분)
2. A > 안방 청소 (10분)
3. B > 주방 청소 (10분)
4. B > 화장실 청소 (15분)
5. 청소 종료

총 소요시간은 `55분`이 걸렸다.

A 가 청소하는동안 B가 기다리는 것은 비효율적이다.  
B 도 함께 청소를 시작하는 경우를 살펴보자.

1. A > 거실 청소 (20분), B > 주방 청소 (10분)
2. A > 안방 청소 (10분), B > 화장실 청소 (15분)
3. B 청소 끝날 때 까지 기다림 (5분)
4. 청소 종료

총 소요시간은 `30분`이 걸렸다.

위 형태를 `비 동기적으로 실행` 된다고 부른다.

<br>

Swift 로 작성된 동기와 비동기 예시는 다음과 같다.

**동기 예제**
```swift
func main() {
    var hello = "Hello"         // 1
    hello.append(", World!")    // 2
    print(hello)                // 3
}
```
> 1, 2, 3 순서대로 진행

가장 일반적인 코드를 작성하는 방식이며, 위 형태를 **동기적으로 실행된다** 라고 표현한다.

**동기의 특징**
1. 위에서 아래로 순서대로 진행된다.
2. 하나의 코드가 완전히 끝난 후 다음 코드가 실행된다.
3. 하나의 스레드가 전담한다.

만약 동기적으로 작성된 프로그램에서 연산이 많이 필요거나, 시간이 오래걸리는 작업을 할 경우
  (ex: 물 끓이기, 3분 동안 익히기, A가 청소 중)  
프로그램이 일시적으로 멈추거나,  
서버의 경우 많은 사용자가 동시에 서비스를 이용하지 못할 것이다.

<br>

**비동기 예제**
```swift
func main() {
    var hello = "Hello"             // 1
    DispatchQueue.main.asyncAfter(deadline: .now() + 2.0) {
        hello.append(", World!")    // 3
        print(hello)                // 4
    }
    print(hello)                    // 2
}
```

> 1, 2, 3, 4 순서대로 진행
 
위 형태를 **비 동기적으로 실행**된다고 표현한다.

<br>

### 비동기 프로그래밍
비동기 프로그래밍은 유저의 클릭과 같은 이벤트부터,  
서버로 부터 데이터를 가져오는 작업을 처리하기 위해서 주로 사용된다.

**비동기의 특징**
1. 작성한 코드 순서대로 동작하지 않는다.
2. 언제 실행이될지 알 수 없다.
3. 호출한 순서대로 동작한다는 보장도 없다.
4. 호출 당시의 값과 실행될 때 값이 다를 수 있다.

<br>

## Swift 의 비동기 프로그래밍

### DispatchQueue(Grand Central Dispatch)
- 동기 및 비동기 코드를 실행하기 위한 큐
- 큐에 적재된 작업들은 운영체제가 자동으로 알맞은 스레드에게 처리하도록 시킨다
- 앱이 실행될 때 `main queue` 와 `global queue` 를 제공함
- `main queue` 는 직렬 큐로 하나의 스레드가 전담(= Main Thread)
- `global queue` 는 동시(병렬) 큐로 다수의 스레드가 처리(운영체제가 적합한 스레드에게 전달)

### Task
- async/await 를 사용할 수 있도록 swift 5.5 부터 도입된 개념
- 외부 환경과 완전히 격리된, 독립적인 비동기 작업을 수행한다. (= actor)
- Task 에 작성된 코드들은 병렬(동시)로 실행된다

## Swift 의 다양한 비동기 프로그래밍 종류


### Delegate
- 전달된 이벤트를 대신 처리하는 위임 패턴
- 객체간의 통신에 주로 사용
- 프로토콜을 통한 약 결합이 장점
    - 이벤트 송신 & 수신자가 서로 누구에게 데이터를 주고 받는지 모르며, 단지 어떠한 이벤트가 일어났는지만 인식한다.
    - 데이터를 받고 싶은 클래스에서 delegate 메소드만 정의하고, delegate

### Closure


**콜백 지옥**



### Async/Await

**Task**

**MainActor**

**Result**

### NotificationCenter

### Combine


### + @escaping 클로저와 메모리
